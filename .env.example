# =================================================================
# Campaign Manager - Environment Variables Template
# =================================================================
# Copy this file to .env.local for local development
# For production, use Docker secrets or AWS Secrets Manager
# =================================================================

# -----------------------------------------------------------------
# Node Environment
# -----------------------------------------------------------------
NODE_ENV=development

# -----------------------------------------------------------------
# Database (PostgreSQL + PostGIS)
# -----------------------------------------------------------------
DATABASE_URL=postgres://campaign_user:campaign_pass@postgres:5432/campaign_db
POSTGRES_USER=campaign_user
POSTGRES_PASSWORD=campaign_pass
POSTGRES_DB=campaign_db
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# -----------------------------------------------------------------
# Redis (Caching and Pub/Sub)
# -----------------------------------------------------------------
REDIS_URL=redis://redis:6379
REDIS_HOST=redis
REDIS_PORT=6379

# -----------------------------------------------------------------
# MinIO / S3-Compatible Storage
# -----------------------------------------------------------------
S3_ENDPOINT=http://minio:9000
S3_ACCESS_KEY=minio_access_key
S3_SECRET_KEY=minio_secret_key
S3_BUCKET=campaign-assets
S3_REGION=us-east-1
MINIO_ROOT_USER=minio_access_key
MINIO_ROOT_PASSWORD=minio_secret_key

# -----------------------------------------------------------------
# Authentication & Authorization
# -----------------------------------------------------------------
JWT_SECRET=your-secret-key-here-change-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# -----------------------------------------------------------------
# API Service
# -----------------------------------------------------------------
API_PORT=9264
API_HOST=0.0.0.0
GRAPHQL_PLAYGROUND=true
GRAPHQL_INTROSPECTION=true

# -----------------------------------------------------------------
# Rules Engine Worker
# -----------------------------------------------------------------
# Enable/disable Rules Engine integration
RULES_ENGINE_ENABLED=true
# gRPC client configuration (API -> Worker)
RULES_ENGINE_GRPC_HOST=rules-engine
RULES_ENGINE_GRPC_PORT=50051
RULES_ENGINE_TIMEOUT_MS=5000
# Worker server configuration
RULES_ENGINE_HTTP_PORT=9265
# Redis database for Rules Engine (0-15)
REDIS_DB=0
# Caching configuration
CACHE_TTL_SECONDS=300
CACHE_CHECK_PERIOD_SECONDS=60
CACHE_MAX_KEYS=10000
RULES_ENGINE_CONCURRENCY=5
RULES_ENGINE_POLL_INTERVAL=1000

# -----------------------------------------------------------------
# Scheduler Worker
# -----------------------------------------------------------------
SCHEDULER_POLL_INTERVAL=5000
SCHEDULER_CONCURRENCY=3

# -----------------------------------------------------------------
# Frontend
# -----------------------------------------------------------------
VITE_PORT=9263
VITE_BACKEND_PORT=9264
VITE_API_URL=/graphql
VITE_GRAPHQL_URL=http://localhost:9264/graphql
VITE_WS_URL=ws://localhost:9263/graphql

# -----------------------------------------------------------------
# Logging
# -----------------------------------------------------------------
LOG_LEVEL=debug
LOG_FORMAT=json

# -----------------------------------------------------------------
# CORS (API)
# -----------------------------------------------------------------
CORS_ORIGIN=http://localhost:9263
CORS_CREDENTIALS=true

# -----------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100

# -----------------------------------------------------------------
# File Upload
# -----------------------------------------------------------------
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf
